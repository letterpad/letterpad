{"ast":null,"code":"var _jsxFileName = \"/Users/abhi/www/letterpad-admin/src/components/layouts/Layout.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { MenuOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer } from \"antd\";\nimport Layout, { Footer } from \"antd/lib/layout/layout\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport { StatsDocument } from \"@/__generated__/queries/queries.graphql\";\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Navigation from \"./Menu\";\nimport Logo from \"../Logo\";\nimport { initializeApollo } from \"@/graphql/apollo\";\nimport ThemeSwitcher from \"./ThemeSwitcher\";\nimport siteConfig from \"config/site.config\";\nimport { useSession } from \"next-auth/client\";\n\nconst CustomLayout = ({\n  children,\n  settings\n}) => {\n  var _user$user;\n\n  // if (typeof window === \"undefined\") return null;\n  const {\n    0: stats,\n    1: setStats\n  } = useState({});\n  const {\n    0: collapsed,\n    1: setCollapsed\n  } = useState(false);\n  const {\n    0: visible,\n    1: setVisible\n  } = useState(false);\n  const [user] = useSession();\n  useEffect(() => {\n    getStats().then(res => {\n      if ((res === null || res === void 0 ? void 0 : res.__typename) === \"Stats\") {\n        setStats(res);\n      }\n    });\n  }, []);\n  if (!settings) return null;\n  return __jsx(Layout, {\n    style: {\n      minHeight: \"100vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }\n  }, __jsx(Sider, {\n    breakpoint: \"lg\",\n    collapsedWidth: \"0\",\n    onBreakpoint: broken => {\n      console.log(broken);\n    },\n    onCollapse: isCollapsed => {\n      setCollapsed(isCollapsed);\n\n      if (!isCollapsed) {\n        setVisible(false);\n      }\n    },\n    style: {\n      overflow: \"auto\",\n      height: \"100vh\",\n      position: \"fixed\",\n      left: 0,\n      zIndex: 9999\n    },\n    width: siteConfig.sidebar_width,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, __jsx(Logo, {\n    src: settings.site_logo.src,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }), __jsx(Navigation, {\n    stats: stats,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }), __jsx(ThemeSwitcher, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  })), __jsx(Layout, {\n    className: \"site-layout\",\n    style: {\n      marginLeft: collapsed ? 0 : siteConfig.sidebar_width\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, __jsx(\"nav\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, __jsx(StyledDrawer, {\n    placement: \"left\",\n    width: 200,\n    theme: \"dark\",\n    onClose: () => setVisible(false),\n    visible: visible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, __jsx(Logo, {\n    src: settings.site_logo.src,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }), __jsx(Navigation, {\n    stats: stats,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 13\n    }\n  }), __jsx(ThemeSwitcher, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      minHeight: siteConfig.header_height,\n      padding: 20,\n      display: \"flex\",\n      justifyContent: \"space-between\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, collapsed && !visible && __jsx(React.Fragment, null, __jsx(\"img\", {\n    src: settings.site_logo.src,\n    height: 40,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }), \"\\xA0\\xA0\\xA0\", __jsx(Button, {\n    className: \"menu\",\n    type: \"ghost\",\n    icon: __jsx(MenuOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 25\n      }\n    }),\n    onClick: () => setVisible(true),\n    size: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }))), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    href: settings.site_url,\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"View Site\"), \"\\xA0\\xA0 \\u2022\\xA0\\xA0Welcome back \", user === null || user === void 0 ? void 0 : (_user$user = user.user) === null || _user$user === void 0 ? void 0 : _user$user.name)), __jsx(\"div\", {\n    style: {\n      minHeight: \"calc(100vh - 152px)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, children), __jsx(StyledFooter, {\n    style: {\n      textAlign: \"center\",\n      background: \"@layout-header-background\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }\n  }, \"Letterpad \", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }), __jsx(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default CustomLayout;\n\nasync function getStats() {\n  const client = await initializeApollo();\n  const stats = await client.query({\n    query: StatsDocument,\n    fetchPolicy: \"network-only\"\n  });\n  return stats.data.stats;\n}\n\nconst StyledDrawer = styled(Drawer).withConfig({\n  displayName: \"Layout__StyledDrawer\"\n})([\".ant-drawer-content{background:@layout-sider-background;}.ant-drawer-body{padding:0px;}\"]);\nconst StyledFooter = styled(Footer).withConfig({\n  displayName: \"Layout__StyledFooter\"\n})([\"background:@layout-sider-background;\"]);","map":{"version":3,"sources":["/Users/abhi/www/letterpad-admin/src/components/layouts/Layout.tsx"],"names":["MenuOutlined","Button","Drawer","Layout","Footer","Sider","StatsDocument","useEffect","useState","styled","Navigation","Logo","initializeApollo","ThemeSwitcher","siteConfig","useSession","CustomLayout","children","settings","stats","setStats","collapsed","setCollapsed","visible","setVisible","user","getStats","then","res","__typename","minHeight","broken","console","log","isCollapsed","overflow","height","position","left","zIndex","sidebar_width","site_logo","src","marginLeft","header_height","padding","display","justifyContent","site_url","name","textAlign","background","client","query","fetchPolicy","data","StyledDrawer","StyledFooter"],"mappings":"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","sourcesContent":["import { MenuOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer } from \"antd\";\nimport Layout, { Footer } from \"antd/lib/layout/layout\";\nimport Sider from \"antd/lib/layout/Sider\";\nimport { Setting, Stats } from \"@/__generated__/type-defs.graphqls\";\nimport {\n  StatsQuery,\n  StatsQueryVariables,\n  StatsDocument,\n} from \"@/__generated__/queries/queries.graphql\";\nimport { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport Navigation from \"./Menu\";\nimport Logo from \"../Logo\";\nimport { initializeApollo } from \"@/graphql/apollo\";\nimport ThemeSwitcher from \"./ThemeSwitcher\";\nimport siteConfig from \"config/site.config\";\nimport { useSession } from \"next-auth/client\";\n\ninterface IProps {\n  settings: Setting;\n  children: any;\n}\n\nconst CustomLayout = ({ children, settings }: IProps) => {\n  // if (typeof window === \"undefined\") return null;\n  const [stats, setStats] = useState<Stats | {}>({});\n  const [collapsed, setCollapsed] = useState(false);\n  const [visible, setVisible] = useState(false);\n  const [user] = useSession();\n\n  useEffect(() => {\n    getStats().then(res => {\n      if (res?.__typename === \"Stats\") {\n        setStats(res);\n      }\n    });\n  }, []);\n\n  if (!settings) return null;\n  return (\n    <Layout style={{ minHeight: \"100vh\" }}>\n      <Sider\n        breakpoint=\"lg\"\n        collapsedWidth=\"0\"\n        onBreakpoint={broken => {\n          console.log(broken);\n        }}\n        onCollapse={isCollapsed => {\n          setCollapsed(isCollapsed);\n          if (!isCollapsed) {\n            setVisible(false);\n          }\n        }}\n        style={{\n          overflow: \"auto\",\n          height: \"100vh\",\n          position: \"fixed\",\n          left: 0,\n          zIndex: 9999,\n        }}\n        width={siteConfig.sidebar_width}\n      >\n        <Logo src={settings.site_logo.src} />\n        <Navigation stats={stats} />\n        <ThemeSwitcher />\n      </Sider>\n      <Layout\n        className=\"site-layout\"\n        style={{\n          marginLeft: collapsed ? 0 : siteConfig.sidebar_width,\n        }}\n      >\n        <nav className=\"navbar\">\n          <StyledDrawer\n            placement=\"left\"\n            width={200}\n            theme=\"dark\"\n            onClose={() => setVisible(false)}\n            visible={visible}\n          >\n            <Logo src={settings.site_logo.src} />\n            <Navigation stats={stats} />\n            <ThemeSwitcher />\n          </StyledDrawer>\n        </nav>\n\n        <div\n          style={{\n            minHeight: siteConfig.header_height,\n            padding: 20,\n            display: \"flex\",\n            justifyContent: \"space-between\",\n          }}\n        >\n          <div>\n            {collapsed && !visible && (\n              <>\n                <img src={settings.site_logo.src} height={40} />\n                &nbsp;&nbsp;&nbsp;\n                <Button\n                  className=\"menu\"\n                  type=\"ghost\"\n                  icon={<MenuOutlined />}\n                  onClick={() => setVisible(true)}\n                  size=\"middle\"\n                />\n              </>\n            )}\n          </div>\n          <div>\n            <a href={settings.site_url} target=\"_blank\">\n              View Site\n            </a>\n            &nbsp;&nbsp; â€¢&nbsp;&nbsp;Welcome back {user?.user?.name}\n          </div>\n        </div>\n        <div style={{ minHeight: \"calc(100vh - 152px)\" }}>{children}</div>\n        <StyledFooter\n          style={{\n            textAlign: \"center\",\n            background: \"@layout-header-background\",\n          }}\n        >\n          Letterpad <br />\n          <small>\n            {/* Client Token: <strong>{settings.client_token}</strong> */}\n          </small>\n        </StyledFooter>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport default CustomLayout;\n\nasync function getStats() {\n  const client = await initializeApollo();\n  const stats = await client.query<StatsQuery, StatsQueryVariables>({\n    query: StatsDocument,\n    fetchPolicy: \"network-only\",\n  });\n\n  return stats.data.stats;\n}\n\nconst StyledDrawer = styled(Drawer)`\n  .ant-drawer-content {\n    background: @layout-sider-background;\n  }\n  .ant-drawer-body {\n    padding: 0px;\n  }\n`;\n\nconst StyledFooter = styled(Footer)`\n  background: @layout-sider-background;\n`;\n"]},"metadata":{},"sourceType":"module"}